{"version":3,"file":"spritz.js","sources":["../node_modules/knot.js/dist/knot.module.js","../node_modules/wait.js/dist/wait.mjs","../src/spritz.js"],"sourcesContent":["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar knot = function knot() {\n  var extended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var events = Object.create(null);\n\n  function on(name, handler) {\n    events[name] = events[name] || [];\n    events[name].push(handler);\n    return this;\n  }\n\n  function once(name, handler) {\n    handler._once = true;\n    on(name, handler);\n    return this;\n  }\n\n  function off(name) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    handler ? events[name].splice(events[name].indexOf(handler), 1) : delete events[name];\n\n    return this;\n  }\n\n  function emit(name) {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // cache the events, to avoid consequences of mutation\n    var cache = events[name] && events[name].slice();\n\n    // only fire handlers if they exist\n    cache && cache.forEach(function (handler) {\n      // remove handlers added with 'once'\n      handler._once && off(name, handler);\n\n      // set 'this' context, pass args to handlers\n      handler.apply(_this, args);\n    });\n\n    return this;\n  }\n\n  return _extends({}, extended, {\n\n    on: on,\n    once: once,\n    off: off,\n    emit: emit\n  });\n};\n\nexport default knot;\n","/*!\n* wait.js 2.1.0 - JavaScript library to easily delay and chain class functions.\n*\n* @author       maoosi <hello@sylvainsimao.fr>\n* @homepage     https://github.com/maoosi/wait.js#readme\n* @copyright    Copyright (c) 2017 maoosi <hello@sylvainsimao.fr>\n* @license      MIT\n* @version      2.1.0\n*/\nvar classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Wait=function(){function t(){classCallCheck(this,t),this.waitQueue=[],this.waitExecution=!1}return createClass(t,[{key:\"handle\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.waitQueue.push({func:e,timeout:this._isAsyncFunc(e)?\"async\":n}),this.waitExecution||this._next(),t}},{key:\"pause\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return this.handle(t,n,e)}},{key:\"_isAsyncFunc\",value:function(t){return t.toString().search(\"done()\")>-1}},{key:\"_exec\",value:function(t){var e=this;t.call(this,function(){e._next()})}},{key:\"_next\",value:function(){var t=this;if(this.waitQueue.length>0){this.waitExecution=!0;var e=this.waitQueue.shift(),n=e.func,i=e.timeout;\"async\"===i?this._exec(n):i!==!1?(this._exec(n),setTimeout(function(){t._next()},i)):(this._exec(n),this._next())}else this.waitExecution=!1}}]),t}(),wait=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Wait,[null].concat(e)))};export default wait;\n//# sourceMappingURL=wait.mjs.map\n","import knot from 'knot.js'\nimport Wait from 'wait.js'\n\nclass Spritz {\n\n    /**\n        --- CORE ---\n    **/\n\n    constructor (selector, options = {}) {\n    // instance constructor\n        this.options = {\n            picture: options.picture || [],\n            steps: options.steps || 1,\n            rows: options.rows || 1,\n            init: (typeof options.init !== 'undefined') ? options.init : 1,\n            testunit: options.testunit || false\n        }\n\n        if (! Array.isArray(this.options.picture)) this.options.picture = [this.options.picture]\n\n        this.selector = typeof selector === 'string'\n            ? document.querySelector(selector)\n            : selector\n\n        this.emitter = knot()\n        this.waitter = Wait()\n        this.supportsWebP = this._supportsWebP()\n\n        this.initiated = false\n\n        return (this.options.init > 0)\n            ? this.init(this.options.init)\n            : this\n    }\n\n    _globalVars () {\n    // global vars\n        this.canvas = false\n        this.ctx = false\n        this.loaded = false\n        this._resetUntil()\n        this.anim = false\n        this.columns = Math.ceil(this.options.steps / this.options.rows)\n        this.currentFps = 15\n        this.flipped = false\n    }\n\n    _throttle (callback, delay) {\n    // throttle function\n        let last\n        let timer\n\n        return () => {\n            let context = this\n            let now = +new Date()\n            let args = arguments\n\n            if (last && now < last + delay) {\n                clearTimeout(timer)\n                timer = setTimeout(() => {\n                    last = now\n                    callback.apply(context, args)\n                }, delay)\n            } else {\n                last = now\n                callback.apply(context, args)\n            }\n        }\n    }\n\n    _bindEvents () {\n    // create events listeners\n        this.resize = this._throttle(() => {\n            this._resize()\n        }, 250)\n\n        window.addEventListener('resize', this.resize, false)\n    }\n\n    _unbindEvents () {\n    // remove events listeners\n        window.removeEventListener('resize', this.resize, false)\n    }\n\n    _resize () {\n    // viewport resize triggered\n        this._loadPicture()\n        this.emitter.emit('resize', this.pic)\n    }\n\n    /**\n        --- API ---\n    **/\n\n    init (step = 1) {\n    // init the sprite\n        return this.waitter.handle(this, () => {\n            if (!this.initiated) {\n                this.initialStep = step\n                this.currentStep = step\n\n                this._globalVars()\n                this._bindEvents()\n                this._createCanvas()\n                this._loadPicture()\n\n                this.initiated = true\n                this.emitter.emit('ready')\n            }\n        })\n    }\n\n    destroy () {\n    // destroy sprite instance\n        return this.waitter.handle(this, () => {\n            if (this.initiated) {\n                // stop stuff\n                this.stop()\n                this._unbindEvents()\n\n                // reset & remove canvas\n                this.canvas.parentNode.removeChild(this.canvas)\n                this.container.parentNode.removeChild(this.container)\n                this.canvas = false\n                this.ctx = false\n\n                // turn initiated to false\n                this.initiated = false\n\n                // emitt destroy\n                this.emitter.emit('destroy')\n\n                // turn off emitters\n                this.emitter.off('ready')\n                this.emitter.off('destroy')\n                this.emitter.off('resize')\n                this.emitter.off('play')\n                this.emitter.off('load')\n                this.emitter.off('change')\n                this.emitter.off('wait')\n                this.emitter.off('flip')\n                this.emitter.off('pause')\n                this.emitter.off('stop')\n            }\n        })\n    }\n\n    play (direction = false) {\n    // play animation forward\n        return this.waitter.handle(this, () => {\n            this.animDirection = (direction === 'backward') ? 'backward' : 'forward'\n            this._startAnimation()\n\n            this.emitter.emit('play', this.animDirection)\n        })\n    }\n\n    playback () {\n    // play animation backward\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'backward'\n            this._startAnimation()\n\n            this.emitter.emit('play', this.animDirection)\n        })\n    }\n\n    pause (silent = false) {\n    // pause animation\n        return this.waitter.handle(this, () => {\n            this._pauseAnimation()\n\n            if (!silent) {\n                this.emitter.emit('pause')\n            }\n        })\n    }\n\n    stop () {\n    // stop animation (= pause + reset)\n        return this.waitter.handle(this, () => {\n            this.pause(true)\n            this.step(this.initialStep)\n\n            this.emitter.emit('stop')\n        })\n    }\n\n    wait (milliseconds = 0) {\n    // chainable timeout\n        return this.waitter.handle(this, () => {\n            this.emitter.emit('wait', milliseconds)\n        }, milliseconds)\n    }\n\n    step (step = 1) {\n    // change the current frame/step\n        return this.waitter.handle(this, () => {\n            let fromStep = this.currentStep\n            this.currentStep = step\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    fps (speed) {\n    // change animation speed\n        return this.waitter.handle(this, () => {\n            this.currentFps = speed\n        })\n    }\n\n    until (step, loop = 1) {\n    // next animation will stop at this\n        return this.waitter.handle(this, () => {\n            this.stopAtStep = step\n            this.stopAtLoop = loop\n        })\n    }\n\n    next () {\n    // go to the next frame\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'forward'\n            let fromStep = this.currentStep\n            this.currentStep = this._targetStep()\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    prev () {\n    // go to the previous frame\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'backward'\n            let fromStep = this.currentStep\n            this.currentStep = this._targetStep()\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    get (data, callback = false) {\n    // return data, then call the callback function with result\n        return this.waitter.handle(this, () => {\n            switch (data) {\n                case 'step':\n                    return callback !== false ? callback.call(this, this.currentStep) : this.currentStep\n                case 'picture':\n                    return callback !== false ? callback.call(this, this.pic) : this.pic\n                default:\n                    return false\n            }\n        })\n    }\n\n    flip () {\n    // flip the sprite horizontally\n        return this.waitter.handle(this, () => {\n            let css = this.flipped\n                ? 'width:100%;height:100%;'\n                : 'width:100%;height:100%;-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1);-webkit-filter:FlipH;filter:FlipH;'\n\n            this.container.setAttribute('style', css)\n            this.flipped = !this.flipped\n            this.emitter.emit('flip')\n        })\n    }\n\n    on (...args) { return this.emitter.on(...args) }\n    off (...args) { return this.emitter.off(...args) }\n\n    /**\n        --- ANIMATE ---\n    **/\n\n    _resetUntil () {\n    // reset the \"until()\" api command\n        this.stopAtLoop = false\n        this.stopAtStep = false\n    }\n\n    _targetStep () {\n    // return the following step to be displayed\n        if (this.animDirection === 'forward') {\n            return this.currentStep < this.options.steps\n                ? this.currentStep + 1\n                : 1\n        } else {\n            return this.currentStep > 1\n                ? this.currentStep - 1\n                : this.options.steps\n        }\n    }\n\n    _animate (timestamp) {\n    // frame animation\n        if (this.initiated) {\n            if (this.animTime === undefined) {\n                this.animTime = timestamp\n            }\n\n            let seg = Math.floor((timestamp - this.animTime) / (1000 / this.currentFps))\n            let pauseAnim = false\n\n            if (seg > this.animFrame) {\n                this.animFrame = seg\n                let fromStep = this.currentStep\n                this.currentStep = this._targetStep()\n\n                let continueAnimate = true\n                if (this.currentStep === this.stopAtStep) {\n                    this.currentLoop ++\n                    if (this.currentLoop === this.stopAtLoop) {\n                        continueAnimate = false\n                    }\n                }\n\n                if (continueAnimate) {\n                    this._draw()\n                    this.emitter.emit('change', fromStep, this.currentStep)\n                } else {\n                    this._draw()\n                    this.pause()\n                    pauseAnim = true\n                }\n            }\n\n            if (!pauseAnim && !this.requireStop) {\n                this.anim = window.requestAnimationFrame((timestamp) => this._animate(timestamp))\n            }\n        }\n    }\n\n    _startAnimation () {\n    // start animation\n        if (!this.anim) {\n            this.requireStop = false\n            this.animTime = undefined\n            this.animFrame = 0\n            this.currentLoop = 0\n            this.anim = window.requestAnimationFrame((timestamp) => this._animate(timestamp))\n        } else {\n            this.pause()\n            this.play(this.animDirection)\n        }\n    }\n\n    _pauseAnimation () {\n    // pause animation\n        if (this.anim) {\n            this._resetUntil()\n            this.requireStop = true\n            window.cancelAnimationFrame(this.anim)\n            this.anim = false\n        }\n    }\n\n    /**\n        --- DETECT & CALCULATE ---\n    **/\n\n    _selectPicture () {\n    // select picture src from list\n        for (let i = 0; i < this.options.picture.length; i++) {\n            let pic = this.options.picture[i]\n            if (this._supportsFormat(pic.srcset) && this._matchesMedia(pic.media)) {\n                this.pic = pic\n                return pic.srcset\n            }\n        }\n        return false\n    }\n\n    _supportsFormat (filename) {\n    // return true if filename is a supported format\n        let ext = this._getExtension(filename)\n        return (ext === 'webp' && this.supportsWebP) || ext !== 'webp'\n    }\n\n    _supportsWebP () {\n    // return true if webP is supported\n        let canvas = document.createElement('canvas')\n        canvas.width = canvas.height = 1\n        return canvas.toDataURL && canvas.toDataURL('image/webp') && canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0\n    }\n\n    _getExtension (filename) {\n    // return the filename extension\n        return (/[.]/.exec(filename)) ? /[^.]+$/.exec(filename)[0] : undefined\n    }\n\n    _matchesMedia (query = undefined) {\n    // return true if matches the media query\n        let mq = window.matchMedia(query)\n        return query !== undefined ? mq.matches : true\n    }\n\n    _setDimensions () {\n    // calculate sprite dimensions\n        this.stepWidth = this.pic.width / this.columns\n        this.stepHeight = this.pic.height / this.options.rows\n        this.stepRatio = this.stepWidth / this.stepHeight\n\n        this.parentWidth = this.selector.clientWidth\n        this.parentHeight = this.selector.clientHeight\n        this.parentRatio = this.parentWidth / this.parentHeight\n\n        if (this.pic.objectFit === 'cover') {\n            if (this.stepRatio >= this.parentRatio) {\n                this.canvasHeight = this.parentHeight\n                this.canvasWidth = (this.stepWidth * this.canvasHeight) / this.stepHeight\n            } else {\n                this.canvasWidth = this.parentWidth\n                this.canvasHeight = (this.stepHeight * this.canvasWidth) / this.stepWidth\n            }\n        } else {\n            if (this.stepRatio >= this.parentRatio) {\n                this.canvasWidth = this.parentWidth\n                this.canvasHeight = (this.stepHeight * this.canvasWidth) / this.stepWidth\n            } else {\n                this.canvasHeight = this.parentHeight\n                this.canvasWidth = (this.stepWidth * this.canvasHeight) / this.stepHeight\n            }\n        }\n\n        this.canvas.width = this.canvasWidth\n        this.canvas.height = this.canvasHeight\n    }\n\n    /**\n        --- CREATE & DRAW ---\n    **/\n\n    _loadPicture () {\n    // load source picture\n        this.picture = new Image()\n        this.picture.onload = () => {\n            if (!this.pic.width) this.pic.width = this.picture.naturalWidth\n            if (!this.pic.height) this.pic.height = this.picture.naturalHeight\n\n            if (!this.loaded) {\n                this.emitter.emit('load', this.pic)\n                this.loaded = true\n            }\n            this._draw()\n        }\n        this.picture.src = this._selectPicture()\n    }\n\n    _draw () {\n    // draw sprite\n        if (this.initiated) {\n            this._setDimensions()\n            this._drawPicture()\n        }\n    }\n\n    _drawPicture () {\n    // draw picture into canvas\n        let targetColumn = Math.floor((this.currentStep - 1) % this.columns)\n        let targetRow = Math.floor((this.currentStep - 1) / this.columns)\n\n        let posX = targetColumn * this.stepWidth\n        let posY = targetRow * this.stepHeight\n\n        if (!this.options.testunit) {\n            this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\n\n            this.ctx.drawImage(\n                this.picture,\n                Math.round(posX), Math.round(posY),\n                this.stepWidth,\n                this.stepHeight,\n                0, 0,\n                this.canvasWidth,\n                this.canvasHeight\n            )\n        }\n    }\n\n    _createCanvas () {\n    // create html5 canvas\n        this.canvas = document.createElement('canvas')\n        this.canvas.setAttribute('style', 'position:absolute;left:50%;top:50%;-webkit-transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);-ms-transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);')\n\n        this.container = document.createElement('div')\n        this.container.setAttribute('style', 'width:100%;height:100%;position:relative;')\n        this.container.appendChild(this.canvas)\n\n        this.selector.appendChild(this.container)\n        this.ctx = this.canvas.getContext('2d')\n    }\n\n}\n\nexport default (...args) => { return new Spritz(...args) }\n"],"names":["knot","extended","arguments","length","undefined","events","Object","create","on","name","handler","push","this","off","splice","indexOf","_extends","once","_once","emit","_this","_len","args","Array","_key","cache","slice","forEach","apply","assign","target","i","source","key","prototype","hasOwnProperty","call","Wait","createClass","t","value","context","func","milliseconds","waitQueue","_isAsyncFunc","waitExecution","_next","handle","toString","search","e","c","shift","f","_exec","Spritz","selector","options","picture","steps","rows","init","testunit","isArray","document","querySelector","emitter","waitter","supportsWebP","_supportsWebP","initiated","canvas","ctx","loaded","_resetUntil","anim","columns","Math","ceil","currentFps","flipped","callback","delay","last","timer","now","Date","clearTimeout","setTimeout","resize","_throttle","_this2","_resize","window","addEventListener","removeEventListener","_loadPicture","pic","step","_this3","initialStep","currentStep","_globalVars","_bindEvents","_createCanvas","_this4","stop","_unbindEvents","parentNode","removeChild","container","direction","_this5","animDirection","_startAnimation","_this6","silent","_this7","_pauseAnimation","_this8","pause","_this9","fromStep","_this10","_draw","speed","_this11","loop","_this12","stopAtStep","stopAtLoop","_this13","_targetStep","_this14","data","_this15","css","_this16","setAttribute","timestamp","animTime","seg","floor","pauseAnim","animFrame","continueAnimate","currentLoop","requireStop","requestAnimationFrame","_this17","_animate","play","_this18","cancelAnimationFrame","_supportsFormat","srcset","_matchesMedia","media","filename","ext","_getExtension","createElement","width","height","toDataURL","exec","query","mq","matchMedia","matches","stepWidth","stepHeight","stepRatio","parentWidth","clientWidth","parentHeight","clientHeight","parentRatio","objectFit","canvasHeight","canvasWidth","Image","onload","_this19","naturalWidth","naturalHeight","src","_selectPicture","_setDimensions","_drawPicture","targetColumn","targetRow","posX","posY","clearRect","drawImage","round","appendChild","getContext"],"mappings":"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"}