{"version":3,"file":"spritz.mjs","sources":["../node_modules/knot.js/dist/knot.module.js","../node_modules/wait.js/dist/wait.mjs","../src/spritz.js"],"sourcesContent":["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar knot = function knot() {\n  var extended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var events = Object.create(null);\n\n  function on(name, handler) {\n    events[name] = events[name] || [];\n    events[name].push(handler);\n    return this;\n  }\n\n  function once(name, handler) {\n    handler._once = true;\n    on(name, handler);\n    return this;\n  }\n\n  function off(name) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    handler ? events[name].splice(events[name].indexOf(handler), 1) : delete events[name];\n\n    return this;\n  }\n\n  function emit(name) {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // cache the events, to avoid consequences of mutation\n    var cache = events[name] && events[name].slice();\n\n    // only fire handlers if they exist\n    cache && cache.forEach(function (handler) {\n      // remove handlers added with 'once'\n      handler._once && off(name, handler);\n\n      // set 'this' context, pass args to handlers\n      handler.apply(_this, args);\n    });\n\n    return this;\n  }\n\n  return _extends({}, extended, {\n\n    on: on,\n    once: once,\n    off: off,\n    emit: emit\n  });\n};\n\nexport default knot;\n","/*!\n* wait.js 2.1.0 - JavaScript library to easily delay and chain class functions.\n*\n* @author       maoosi <hello@sylvainsimao.fr>\n* @homepage     https://github.com/maoosi/wait.js#readme\n* @copyright    Copyright (c) 2017 maoosi <hello@sylvainsimao.fr>\n* @license      MIT\n* @version      2.1.0\n*/\nvar classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Wait=function(){function t(){classCallCheck(this,t),this.waitQueue=[],this.waitExecution=!1}return createClass(t,[{key:\"handle\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.waitQueue.push({func:e,timeout:this._isAsyncFunc(e)?\"async\":n}),this.waitExecution||this._next(),t}},{key:\"pause\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return this.handle(t,n,e)}},{key:\"_isAsyncFunc\",value:function(t){return t.toString().search(\"done()\")>-1}},{key:\"_exec\",value:function(t){var e=this;t.call(this,function(){e._next()})}},{key:\"_next\",value:function(){var t=this;if(this.waitQueue.length>0){this.waitExecution=!0;var e=this.waitQueue.shift(),n=e.func,i=e.timeout;\"async\"===i?this._exec(n):i!==!1?(this._exec(n),setTimeout(function(){t._next()},i)):(this._exec(n),this._next())}else this.waitExecution=!1}}]),t}(),wait=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Wait,[null].concat(e)))};export default wait;\n//# sourceMappingURL=wait.mjs.map\n","import knot from 'knot.js'\nimport Wait from 'wait.js'\n\nclass Spritz {\n\n    /**\n        --- CORE ---\n    **/\n\n    constructor (selector, options = {}) {\n    // instance constructor\n        this.options = {\n            picture: options.picture || [],\n            steps: options.steps || 1,\n            rows: options.rows || 1,\n            init: (typeof options.init !== 'undefined') ? options.init : 1,\n            testunit: options.testunit || false\n        }\n\n        if (! Array.isArray(this.options.picture)) this.options.picture = [this.options.picture]\n\n        this.selector = typeof selector === 'string'\n            ? document.querySelector(selector)\n            : selector\n\n        this.emitter = knot()\n        this.waitter = Wait()\n        this.supportsWebP = this._supportsWebP()\n\n        this.initiated = false\n\n        return (this.options.init > 0)\n            ? this.init(this.options.init)\n            : this\n    }\n\n    _globalVars () {\n    // global vars\n        this.canvas = false\n        this.ctx = false\n        this.loaded = false\n        this._resetUntil()\n        this.anim = false\n        this.columns = Math.ceil(this.options.steps / this.options.rows)\n        this.currentFps = 15\n        this.flipped = false\n    }\n\n    _throttle (callback, delay) {\n    // throttle function\n        let last\n        let timer\n\n        return () => {\n            let context = this\n            let now = +new Date()\n            let args = arguments\n\n            if (last && now < last + delay) {\n                clearTimeout(timer)\n                timer = setTimeout(() => {\n                    last = now\n                    callback.apply(context, args)\n                }, delay)\n            } else {\n                last = now\n                callback.apply(context, args)\n            }\n        }\n    }\n\n    _bindEvents () {\n    // create events listeners\n        this.resize = this._throttle(() => {\n            this._resize()\n        }, 250)\n\n        window.addEventListener('resize', this.resize, false)\n    }\n\n    _unbindEvents () {\n    // remove events listeners\n        window.removeEventListener('resize', this.resize, false)\n    }\n\n    _resize () {\n    // viewport resize triggered\n        this._loadPicture()\n        this.emitter.emit('resize', this.pic)\n    }\n\n    /**\n        --- API ---\n    **/\n\n    init (step = 1) {\n    // init the sprite\n        return this.waitter.handle(this, () => {\n            if (!this.initiated) {\n                this.initialStep = step\n                this.currentStep = step\n\n                this._globalVars()\n                this._bindEvents()\n                this._createCanvas()\n                this._loadPicture()\n\n                this.initiated = true\n                this.emitter.emit('ready')\n            }\n        })\n    }\n\n    destroy () {\n    // destroy sprite instance\n        return this.waitter.handle(this, () => {\n            if (this.initiated) {\n                // stop stuff\n                this.stop()\n                this._unbindEvents()\n\n                // reset & remove canvas\n                this.canvas.parentNode.removeChild(this.canvas)\n                this.container.parentNode.removeChild(this.container)\n                this.canvas = false\n                this.ctx = false\n\n                // turn initiated to false\n                this.initiated = false\n\n                // emitt destroy\n                this.emitter.emit('destroy')\n\n                // turn off emitters\n                this.emitter.off('ready')\n                this.emitter.off('destroy')\n                this.emitter.off('resize')\n                this.emitter.off('play')\n                this.emitter.off('load')\n                this.emitter.off('change')\n                this.emitter.off('wait')\n                this.emitter.off('flip')\n                this.emitter.off('pause')\n                this.emitter.off('stop')\n            }\n        })\n    }\n\n    play (direction = false) {\n    // play animation forward\n        return this.waitter.handle(this, () => {\n            this.animDirection = (direction === 'backward') ? 'backward' : 'forward'\n            this._startAnimation()\n\n            this.emitter.emit('play', this.animDirection)\n        })\n    }\n\n    playback () {\n    // play animation backward\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'backward'\n            this._startAnimation()\n\n            this.emitter.emit('play', this.animDirection)\n        })\n    }\n\n    pause (silent = false) {\n    // pause animation\n        return this.waitter.handle(this, () => {\n            this._pauseAnimation()\n\n            if (!silent) {\n                this.emitter.emit('pause')\n            }\n        })\n    }\n\n    stop () {\n    // stop animation (= pause + reset)\n        return this.waitter.handle(this, () => {\n            this.pause(true)\n            this.step(this.initialStep)\n\n            this.emitter.emit('stop')\n        })\n    }\n\n    wait (milliseconds = 0) {\n    // chainable timeout\n        return this.waitter.handle(this, () => {\n            this.emitter.emit('wait', milliseconds)\n        }, milliseconds)\n    }\n\n    step (step = 1) {\n    // change the current frame/step\n        return this.waitter.handle(this, () => {\n            let fromStep = this.currentStep\n            this.currentStep = step\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    fps (speed) {\n    // change animation speed\n        return this.waitter.handle(this, () => {\n            this.currentFps = speed\n        })\n    }\n\n    until (step, loop = 1) {\n    // next animation will stop at this\n        return this.waitter.handle(this, () => {\n            this.stopAtStep = step\n            this.stopAtLoop = loop\n        })\n    }\n\n    next () {\n    // go to the next frame\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'forward'\n            let fromStep = this.currentStep\n            this.currentStep = this._targetStep()\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    prev () {\n    // go to the previous frame\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'backward'\n            let fromStep = this.currentStep\n            this.currentStep = this._targetStep()\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    get (data, callback = false) {\n    // return data, then call the callback function with result\n        return this.waitter.handle(this, () => {\n            switch (data) {\n                case 'step':\n                    return callback !== false ? callback.call(this, this.currentStep) : this.currentStep\n                case 'picture':\n                    return callback !== false ? callback.call(this, this.pic) : this.pic\n                default:\n                    return false\n            }\n        })\n    }\n\n    flip () {\n    // flip the sprite horizontally\n        return this.waitter.handle(this, () => {\n            let css = this.flipped\n                ? 'width:100%;height:100%;'\n                : 'width:100%;height:100%;-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1);-webkit-filter:FlipH;filter:FlipH;'\n\n            this.container.setAttribute('style', css)\n            this.flipped = !this.flipped\n            this.emitter.emit('flip')\n        })\n    }\n\n    on (...args) { return this.emitter.on(...args) }\n    off (...args) { return this.emitter.off(...args) }\n\n    /**\n        --- ANIMATE ---\n    **/\n\n    _resetUntil () {\n    // reset the \"until()\" api command\n        this.stopAtLoop = false\n        this.stopAtStep = false\n    }\n\n    _targetStep () {\n    // return the following step to be displayed\n        if (this.animDirection === 'forward') {\n            return this.currentStep < this.options.steps\n                ? this.currentStep + 1\n                : 1\n        } else {\n            return this.currentStep > 1\n                ? this.currentStep - 1\n                : this.options.steps\n        }\n    }\n\n    _animate (timestamp) {\n    // frame animation\n        if (this.initiated) {\n            if (this.animTime === undefined) {\n                this.animTime = timestamp\n            }\n\n            let seg = Math.floor((timestamp - this.animTime) / (1000 / this.currentFps))\n            let pauseAnim = false\n\n            if (seg > this.animFrame) {\n                this.animFrame = seg\n                let fromStep = this.currentStep\n                this.currentStep = this._targetStep()\n\n                let continueAnimate = true\n                if (this.currentStep === this.stopAtStep) {\n                    this.currentLoop ++\n                    if (this.currentLoop === this.stopAtLoop) {\n                        continueAnimate = false\n                    }\n                }\n\n                if (continueAnimate) {\n                    this._draw()\n                    this.emitter.emit('change', fromStep, this.currentStep)\n                } else {\n                    this._draw()\n                    this.pause()\n                    pauseAnim = true\n                }\n            }\n\n            if (!pauseAnim && !this.requireStop) {\n                this.anim = window.requestAnimationFrame((timestamp) => this._animate(timestamp))\n            }\n        }\n    }\n\n    _startAnimation () {\n    // start animation\n        if (!this.anim) {\n            this.requireStop = false\n            this.animTime = undefined\n            this.animFrame = 0\n            this.currentLoop = 0\n            this.anim = window.requestAnimationFrame((timestamp) => this._animate(timestamp))\n        } else {\n            this.pause()\n            this.play(this.animDirection)\n        }\n    }\n\n    _pauseAnimation () {\n    // pause animation\n        if (this.anim) {\n            this._resetUntil()\n            this.requireStop = true\n            window.cancelAnimationFrame(this.anim)\n            this.anim = false\n        }\n    }\n\n    /**\n        --- DETECT & CALCULATE ---\n    **/\n\n    _selectPicture () {\n    // select picture src from list\n        for (let i = 0; i < this.options.picture.length; i++) {\n            let pic = this.options.picture[i]\n            if (this._supportsFormat(pic.srcset) && this._matchesMedia(pic.media)) {\n                this.pic = pic\n                return pic.srcset\n            }\n        }\n        return false\n    }\n\n    _supportsFormat (filename) {\n    // return true if filename is a supported format\n        let ext = this._getExtension(filename)\n        return (ext === 'webp' && this.supportsWebP) || ext !== 'webp'\n    }\n\n    _supportsWebP () {\n    // return true if webP is supported\n        let canvas = document.createElement('canvas')\n        canvas.width = canvas.height = 1\n        return canvas.toDataURL && canvas.toDataURL('image/webp') && canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0\n    }\n\n    _getExtension (filename) {\n    // return the filename extension\n        return (/[.]/.exec(filename)) ? /[^.]+$/.exec(filename)[0] : undefined\n    }\n\n    _matchesMedia (query = undefined) {\n    // return true if matches the media query\n        let mq = window.matchMedia(query)\n        return query !== undefined ? mq.matches : true\n    }\n\n    _setDimensions () {\n    // calculate sprite dimensions\n        this.stepWidth = this.pic.width / this.columns\n        this.stepHeight = this.pic.height / this.options.rows\n        this.stepRatio = this.stepWidth / this.stepHeight\n\n        this.parentWidth = this.selector.clientWidth\n        this.parentHeight = this.selector.clientHeight\n        this.parentRatio = this.parentWidth / this.parentHeight\n\n        if (this.pic.objectFit === 'cover') {\n            if (this.stepRatio >= this.parentRatio) {\n                this.canvasHeight = this.parentHeight\n                this.canvasWidth = (this.stepWidth * this.canvasHeight) / this.stepHeight\n            } else {\n                this.canvasWidth = this.parentWidth\n                this.canvasHeight = (this.stepHeight * this.canvasWidth) / this.stepWidth\n            }\n        } else {\n            if (this.stepRatio >= this.parentRatio) {\n                this.canvasWidth = this.parentWidth\n                this.canvasHeight = (this.stepHeight * this.canvasWidth) / this.stepWidth\n            } else {\n                this.canvasHeight = this.parentHeight\n                this.canvasWidth = (this.stepWidth * this.canvasHeight) / this.stepHeight\n            }\n        }\n\n        this.canvas.width = this.canvasWidth\n        this.canvas.height = this.canvasHeight\n    }\n\n    /**\n        --- CREATE & DRAW ---\n    **/\n\n    _loadPicture () {\n    // load source picture\n        this.picture = new Image()\n        this.picture.onload = () => {\n            if (!this.pic.width) this.pic.width = this.picture.naturalWidth\n            if (!this.pic.height) this.pic.height = this.picture.naturalHeight\n\n            if (!this.loaded) {\n                this.emitter.emit('load', this.pic)\n                this.loaded = true\n            }\n            this._draw()\n        }\n        this.picture.src = this._selectPicture()\n    }\n\n    _draw () {\n    // draw sprite\n        if (this.initiated) {\n            this._setDimensions()\n            this._drawPicture()\n        }\n    }\n\n    _drawPicture () {\n    // draw picture into canvas\n        let targetColumn = Math.floor((this.currentStep - 1) % this.columns)\n        let targetRow = Math.floor((this.currentStep - 1) / this.columns)\n\n        let posX = targetColumn * this.stepWidth\n        let posY = targetRow * this.stepHeight\n\n        if (!this.options.testunit) {\n            this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\n\n            this.ctx.drawImage(\n                this.picture,\n                Math.round(posX), Math.round(posY),\n                this.stepWidth,\n                this.stepHeight,\n                0, 0,\n                this.canvasWidth,\n                this.canvasHeight\n            )\n        }\n    }\n\n    _createCanvas () {\n    // create html5 canvas\n        this.canvas = document.createElement('canvas')\n        this.canvas.setAttribute('style', 'position:absolute;left:50%;top:50%;-webkit-transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);-ms-transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);')\n\n        this.container = document.createElement('div')\n        this.container.setAttribute('style', 'width:100%;height:100%;position:relative;')\n        this.container.appendChild(this.canvas)\n\n        this.selector.appendChild(this.container)\n        this.ctx = this.canvas.getContext('2d')\n    }\n\n}\n\nexport default (...args) => { return new Spritz(...args) }\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","knot","on","name","handler","events","push","this","once","_once","off","undefined","splice","indexOf","emit","_this","_len","args","Array","_key","cache","slice","forEach","apply","extended","create","classCallCheck","t","e","TypeError","createClass","n","enumerable","configurable","writable","defineProperty","Wait","waitQueue","waitExecution","value","func","timeout","_isAsyncFunc","_next","handle","toString","search","shift","_exec","setTimeout","wait","Function","bind","concat","Spritz","selector","options","picture","steps","rows","init","testunit","isArray","document","querySelector","emitter","waitter","supportsWebP","_supportsWebP","initiated","canvas","ctx","loaded","_resetUntil","anim","columns","Math","ceil","currentFps","flipped","callback","delay","last","timer","context","now","Date","resize","_throttle","_resize","addEventListener","removeEventListener","_loadPicture","pic","step","_this3","initialStep","currentStep","_globalVars","_bindEvents","_createCanvas","_this4","stop","_unbindEvents","parentNode","removeChild","container","direction","animDirection","_startAnimation","_this5","_this6","silent","_pauseAnimation","pause","_this8","milliseconds","fromStep","_this10","_draw","speed","loop","stopAtStep","stopAtLoop","_this13","_targetStep","_this14","data","_this15","css","_this16","setAttribute","timestamp","animTime","seg","floor","pauseAnim","animFrame","continueAnimate","currentLoop","requireStop","window","requestAnimationFrame","_this17","_animate","play","_this18","cancelAnimationFrame","_supportsFormat","srcset","_matchesMedia","media","filename","ext","_getExtension","createElement","width","height","toDataURL","exec","query","mq","matchMedia","matches","stepWidth","stepHeight","stepRatio","parentWidth","clientWidth","parentHeight","clientHeight","parentRatio","objectFit","canvasHeight","canvasWidth","Image","onload","_this19","naturalWidth","naturalHeight","src","_selectPicture","_setDimensions","_drawPicture","targetColumn","targetRow","posX","posY","clearRect","drawImage","round","appendChild","getContext"],"mappings":";;;;;;;;;AAAA,GAAIA,UAAWC,OAAOC,QAAU,SAAUC,OACnC,GAAIC,GAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,IACrCG,GAASF,UAAUD,OAElB,GAAII,KAAOD,GACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,OACxCA,GAAOD,EAAOC,UAKpBL,IAGLS,KAAO,mBAKAC,GAAGC,EAAMC,YACTD,GAAQE,EAAOF,SACfA,GAAMG,KAAKF,GACXG,aAGAC,GAAKL,EAAMC,YACVK,OAAQ,IACbN,EAAMC,GACFG,aAGAG,GAAIP,MACPC,GAAUV,UAAUC,OAAS,GAAsBgB,SAAjBjB,UAAU,IAAmBA,UAAU,YAEnEW,EAAOF,GAAMS,OAAOP,EAAOF,GAAMU,QAAQT,GAAU,SAAYC,GAAOF,GAEzEI,aAGAO,GAAKX,OAGP,GAFDY,GAAQR,KAEHS,EAAOtB,UAAUC,OAAQsB,EAAOC,MAAMF,EAAO,EAAIA,EAAO,EAAI,GAAIG,EAAO,EAAGA,EAAOH,EAAMG,MACzFA,EAAO,GAAKzB,UAAUyB,MAIzBC,GAAQf,EAAOF,IAASE,EAAOF,GAAMkB,kBAGhCD,EAAME,QAAQ,SAAUlB,KAEvBK,OAASC,EAAIP,EAAMC,KAGnBmB,MAAMR,EAAOE,KAGhBV,QA3CLiB,GAAW9B,UAAUC,OAAS,GAAsBgB,SAAjBjB,UAAU,GAAmBA,UAAU,MAE1EW,EAASf,OAAOmC,OAAO,YA4CpBpC,aAAamC,MAEdtB,OACEM,MACDE,OACCI,KCzDNY,eAAe,SAASC,EAAEC,QAAQD,YAAaC,IAAG,KAAM,IAAIC,WAAU,sCAAsCC,YAAY,mBAAoBH,GAAEA,EAAEC,OAAO,GAAIG,GAAE,EAAEA,EAAEH,EAAEjC,OAAOoC,IAAI,IAAKtC,GAAEmC,EAAEG,EAAGtC,GAAEuC,WAAWvC,EAAEuC,aAAY,EAAGvC,EAAEwC,cAAa,EAAG,SAAUxC,KAAIA,EAAEyC,UAAS,GAAI5C,OAAO6C,eAAeR,EAAElC,EAAEI,IAAIJ,UAAW,UAASmC,EAAEG,EAAEtC,SAAUsC,IAAGJ,EAAEC,EAAE9B,UAAUiC,GAAGtC,GAAGkC,EAAEC,EAAEnC,GAAGmC,MAAMQ,KAAK,mBAAoBT,oBAAmBpB,KAAKoB,GAAGpB,KAAK8B,aAAa9B,KAAK+B,eAAc,QAAUR,aAAYH,IAAI9B,IAAI,SAAS0C,MAAM,SAASZ,EAAEC,MAAOG,GAAErC,UAAUC,OAAO,GAAG,SAASD,UAAU,IAAIA,UAAU,EAAG,OAAOa,MAAK8B,UAAU/B,MAAMkC,KAAKZ,EAAEa,QAAQlC,KAAKmC,aAAad,GAAG,QAAQG,IAAIxB,KAAK+B,eAAe/B,KAAKoC,QAAQhB,KAAK9B,IAAI,QAAQ0C,MAAM,SAASZ,EAAEC,MAAOG,GAAErC,UAAUC,OAAO,GAAG,SAASD,UAAU,GAAGA,UAAU,GAAG,YAAa,OAAOa,MAAKqC,OAAOjB,EAAEI,EAAEH,MAAM/B,IAAI,eAAe0C,MAAM,SAASZ,SAAUA,GAAEkB,WAAWC,OAAO,WAAU,KAAMjD,IAAI,QAAQ0C,MAAM,SAASZ,MAAOC,GAAErB,IAAKoB,GAAE3B,KAAKO,KAAK,aAAaoC,aAAa9C,IAAI,QAAQ0C,MAAM,cAAeZ,GAAEpB,IAAK,IAAGA,KAAK8B,UAAU1C,OAAO,EAAE,MAAM2C,eAAc,CAAG,IAAIV,GAAErB,KAAK8B,UAAUU,QAAQhB,EAAEH,EAAEY,KAAK/C,EAAEmC,EAAEa,OAAQ,WAAUhD,EAAEc,KAAKyC,MAAMjB,GAAGtC,KAAI,GAAIc,KAAKyC,MAAMjB,GAAGkB,WAAW,aAAaN,SAASlD,KAAKc,KAAKyC,MAAMjB,GAAGxB,KAAKoC,aAAcpC,MAAK+B,eAAc,MAAOX,KAAKuB,KAAK,eAAe,GAAIvB,GAAEjC,UAAUC,OAAOiC,EAAEV,MAAMS,GAAGI,EAAE,EAAEA,EAAEJ,EAAEI,MAAMA,GAAGrC,UAAUqC,EAAG,OAAO,KAAIoB,SAASrD,UAAUsD,KAAK7B,MAAMa,MAAM,MAAMiB,OAAOzB,qXCNr4C0B,6BAMWC,MAAUC,kGAEdA,iBACQA,EAAQC,kBACVD,EAAQE,OAAS,OAClBF,EAAQG,MAAQ,OACS,mBAAjBH,GAAQI,KAAwBJ,EAAQI,KAAO,WACnDJ,EAAQK,WAAY,GAG5B3C,MAAM4C,QAAQvD,KAAKiD,QAAQC,WAAUlD,KAAKiD,QAAQC,SAAWlD,KAAKiD,QAAQC,eAE3EF,SAA+B,gBAAbA,GACjBQ,SAASC,cAAcT,GACvBA,OAEDU,QAAUhE,YACViE,QAAU9B,YACV+B,aAAe5D,KAAK6D,qBAEpBC,WAAY,EAET9D,KAAKiD,QAAQI,KAAO,EACtBrD,KAAKqD,KAAKrD,KAAKiD,QAAQI,MACvBrD,sEAKD+D,QAAS,OACTC,KAAM,OACNC,QAAS,OACTC,mBACAC,MAAO,OACPC,QAAUC,KAAKC,KAAKtE,KAAKiD,QAAQE,MAAQnD,KAAKiD,QAAQG,WACtDmB,WAAa,QACbC,SAAU,oCAGRC,EAAUC,0BAEbC,SACAC,eAEG,eACCC,KACAC,GAAO,GAAIC,MACXrE,GAEAiE,IAAQG,EAAMH,EAAOD,gBACRE,KACLlC,WAAW,aACRoC,IACE9D,MAAM6D,EAASnE,IACzBgE,OAEII,IACE9D,MAAM6D,EAASnE,2DAO3BsE,OAAShF,KAAKiF,UAAU,aACpBC,WACN,YAEIC,iBAAiB,SAAUnF,KAAKgF,QAAQ,kDAKxCI,oBAAoB,SAAUpF,KAAKgF,QAAQ,0CAK7CK,oBACA3B,QAAQnD,KAAK,SAAUP,KAAKsF,+CAO/BC,yDAAO,QAEFvF,MAAK2D,QAAQtB,OAAOrC,KAAM,WACxBwF,EAAK1B,cACD2B,YAAcF,IACdG,YAAcH,IAEdI,gBACAC,gBACAC,kBACAR,iBAEAvB,WAAY,IACZJ,QAAQnD,KAAK,+DAOnBP,MAAK2D,QAAQtB,OAAOrC,KAAM,WACzB8F,EAAKhC,cAEAiC,SACAC,gBAGLF,EAAK/B,OAAOkC,WAAWC,YAAYJ,EAAK/B,UACnCoC,UAAUF,WAAWC,YAAYJ,EAAKK,aACtCpC,QAAS,IACTC,KAAM,IAGNF,WAAY,IAGZJ,QAAQnD,KAAK,WAGlBuF,EAAKpC,QAAQvD,IAAI,WACZuD,QAAQvD,IAAI,aACZuD,QAAQvD,IAAI,YACZuD,QAAQvD,IAAI,UACZuD,QAAQvD,IAAI,UACZuD,QAAQvD,IAAI,YACZuD,QAAQvD,IAAI,UACZuD,QAAQvD,IAAI,UACZuD,QAAQvD,IAAI,WACZuD,QAAQvD,IAAI,qDAKvBiG,gEAEKpG,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxBqG,cAA+B,aAAdD,EAA4B,WAAa,YAC1DE,oBAEA5C,QAAQnD,KAAK,OAAQgG,EAAKF,qEAM5BrG,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxBqG,cAAgB,aAChBC,oBAEA5C,QAAQnD,KAAK,OAAQiG,EAAKH,4DAIhCI,gEAEIzG,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxB0G,kBAEAD,KACI/C,QAAQnD,KAAK,2DAOnBP,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxB2G,OAAM,KACNpB,KAAKqB,EAAKnB,eAEV/B,QAAQnD,KAAK,oDAIpBsG,yDAAe,QAEV7G,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxB0D,QAAQnD,KAAK,OAAQsG,IAC3BA,6CAGDtB,yDAAO,QAEFvF,MAAK2D,QAAQtB,OAAOrC,KAAM,cACzB8G,GAAWC,EAAKrB,cACfA,YAAcH,IACdyB,UAEAtD,QAAQnD,KAAK,SAAUuG,EAAUC,EAAKrB,2CAI9CuB,oBAEMjH,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxBuE,WAAa0C,kCAInB1B,cAAM2B,yDAAO,QAETlH,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxBmH,WAAa5B,IACb6B,WAAaF,oDAMflH,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxBqG,cAAgB,aACjBS,GAAWO,EAAK3B,cACfA,YAAc2B,EAAKC,gBACnBN,UAEAtD,QAAQnD,KAAK,SAAUuG,EAAUO,EAAK3B,+DAMxC1F,MAAK2D,QAAQtB,OAAOrC,KAAM,aACxBqG,cAAgB,cACjBS,GAAWS,EAAK7B,cACfA,YAAc6B,EAAKD,gBACnBN,UAEAtD,QAAQnD,KAAK,SAAUuG,EAAUS,EAAK7B,2CAI9C8B,cAAM/C,gEAEAzE,MAAK2D,QAAQtB,OAAOrC,KAAM,kBACrBwH,OACC,aACM/C,MAAa,EAAQA,EAAShF,OAAWgI,EAAK/B,aAAe+B,EAAK/B,gBACxE,gBACMjB,MAAa,EAAQA,EAAShF,OAAWgI,EAAKnC,KAAOmC,EAAKnC,mBAE1D,qDAOZtF,MAAK2D,QAAQtB,OAAOrC,KAAM,cACzB0H,GAAMC,EAAKnD,QACT,0BACA,+IAED2B,UAAUyB,aAAa,QAASF,KAChClD,SAAWmD,EAAKnD,UAChBd,QAAQnD,KAAK,2DAICmD,SAAQ/D,wEACP+D,SAAQvD,kEAQ3BiH,YAAa,OACbD,YAAa,8CAKS,YAAvBnH,KAAKqG,cACErG,KAAK0F,YAAc1F,KAAKiD,QAAQE,MACjCnD,KAAK0F,YAAc,EACnB,EAEC1F,KAAK0F,YAAc,EACpB1F,KAAK0F,YAAc,EACnB1F,KAAKiD,QAAQE,uCAIjB0E,iBAEF7H,KAAK8D,UAAW,CACM1D,SAAlBJ,KAAK8H,gBACAA,SAAWD,MAGhBE,GAAM1D,KAAK2D,OAAOH,EAAY7H,KAAK8H,WAAa,IAAO9H,KAAKuE,aAC5D0D,GAAY,KAEZF,EAAM/H,KAAKkI,UAAW,MACjBA,UAAYH,KACbjB,GAAW9G,KAAK0F,iBACfA,YAAc1F,KAAKsH,iBAEpBa,IAAkB,CAClBnI,MAAK0F,cAAgB1F,KAAKmH,kBACrBiB,cACDpI,KAAKoI,cAAgBpI,KAAKoH,gBACR,IAItBe,QACKnB,aACAtD,QAAQnD,KAAK,SAAUuG,EAAU9G,KAAK0F,oBAEtCsB,aACAL,WACO,GAIfsB,GAAcjI,KAAKqI,mBACflE,KAAOmE,OAAOC,sBAAsB,SAACV,SAAcW,GAAKC,SAASZ,2DAOzE7H,MAAKmE,WAODwC,aACA+B,KAAK1I,KAAKqG,sBAPVgC,aAAc,OACdP,SAAW1H,YACX8H,UAAY,OACZE,YAAc,OACdjE,KAAOmE,OAAOC,sBAAsB,SAACV,SAAcc,GAAKF,SAASZ,gDAStE7H,KAAKmE,YACAD,mBACAmE,aAAc,SACZO,qBAAqB5I,KAAKmE,WAC5BA,MAAO,gDAUX,GAAIjF,GAAI,EAAGA,EAAIc,KAAKiD,QAAQC,QAAQ9D,OAAQF,IAAK,IAC9CoG,GAAMtF,KAAKiD,QAAQC,QAAQhE,MAC3Bc,KAAK6I,gBAAgBvD,EAAIwD,SAAW9I,KAAK+I,cAAczD,EAAI0D,mBACtD1D,IAAMA,EACJA,EAAIwD,cAGZ,0CAGMG,MAETC,GAAMlJ,KAAKmJ,cAAcF,SACb,SAARC,GAAkBlJ,KAAK4D,cAAyB,SAARsF,6CAK5CnF,GAASP,SAAS4F,cAAc,mBAC7BC,MAAQtF,EAAOuF,OAAS,EACxBvF,EAAOwF,WAAaxF,EAAOwF,UAAU,eAA+E,IAA9DxF,EAAOwF,UAAU,cAAcjJ,QAAQ,yDAGzF2I,eAEGO,KAAKP,GAAa,SAASO,KAAKP,GAAU,GAAK7I,kDAGlDqJ,0DAAQrJ,OAEfsJ,EAAKpB,OAAOqB,WAAWF,SACVrJ,UAAVqJ,GAAsBC,EAAGE,sDAK3BC,UAAY7J,KAAKsF,IAAI+D,MAAQrJ,KAAKoE,aAClC0F,WAAa9J,KAAKsF,IAAIgE,OAAStJ,KAAKiD,QAAQG,UAC5C2G,UAAY/J,KAAK6J,UAAY7J,KAAK8J,gBAElCE,YAAchK,KAAKgD,SAASiH,iBAC5BC,aAAelK,KAAKgD,SAASmH,kBAC7BC,YAAcpK,KAAKgK,YAAchK,KAAKkK,aAEhB,UAAvBlK,KAAKsF,IAAI+E,UACLrK,KAAK+J,WAAa/J,KAAKoK,kBAClBE,aAAetK,KAAKkK,kBACpBK,YAAevK,KAAK6J,UAAY7J,KAAKsK,aAAgBtK,KAAK8J,kBAE1DS,YAAcvK,KAAKgK,iBACnBM,aAAgBtK,KAAK8J,WAAa9J,KAAKuK,YAAevK,KAAK6J,WAGhE7J,KAAK+J,WAAa/J,KAAKoK,kBAClBG,YAAcvK,KAAKgK,iBACnBM,aAAgBtK,KAAK8J,WAAa9J,KAAKuK,YAAevK,KAAK6J,iBAE3DS,aAAetK,KAAKkK,kBACpBK,YAAevK,KAAK6J,UAAY7J,KAAKsK,aAAgBtK,KAAK8J,iBAIlE/F,OAAOsF,MAAQrJ,KAAKuK,iBACpBxG,OAAOuF,OAAStJ,KAAKsK,oEASrBpH,QAAU,GAAIsH,YACdtH,QAAQuH,OAAS,WACbC,EAAKpF,IAAI+D,QAAOqB,EAAKpF,IAAI+D,MAAQqB,EAAKxH,QAAQyH,cAC9CD,EAAKpF,IAAIgE,SAAQoB,EAAKpF,IAAIgE,OAASoB,EAAKxH,QAAQ0H,eAEhDF,EAAKzG,WACDP,QAAQnD,KAAK,OAAQmK,EAAKpF,OAC1BrB,QAAS,KAEb+C,cAEJ9D,QAAQ2H,IAAM7K,KAAK8K,iDAKpB9K,KAAK8D,iBACAiH,sBACAC,0DAMLC,GAAe5G,KAAK2D,OAAOhI,KAAK0F,YAAc,GAAK1F,KAAKoE,SACxD8G,EAAY7G,KAAK2D,OAAOhI,KAAK0F,YAAc,GAAK1F,KAAKoE,SAErD+G,EAAOF,EAAejL,KAAK6J,UAC3BuB,EAAOF,EAAYlL,KAAK8J,UAEvB9J,MAAKiD,QAAQK,gBACTU,IAAIqH,UAAU,EAAG,EAAGrL,KAAKuK,YAAavK,KAAKsK,mBAE3CtG,IAAIsH,UACLtL,KAAKkD,QACLmB,KAAKkH,MAAMJ,GAAO9G,KAAKkH,MAAMH,GAC7BpL,KAAK6J,UACL7J,KAAK8J,WACL,EAAG,EACH9J,KAAKuK,YACLvK,KAAKsK,4DAORvG,OAASP,SAAS4F,cAAc,eAChCrF,OAAO6D,aAAa,QAAS,4RAE7BzB,UAAY3C,SAAS4F,cAAc,YACnCjD,UAAUyB,aAAa,QAAS,kDAChCzB,UAAUqF,YAAYxL,KAAK+D,aAE3Bf,SAASwI,YAAYxL,KAAKmG,gBAC1BnC,IAAMhE,KAAK+D,OAAO0H,WAAW,sBAK3B,sCAAI/K,kFAAsBqC,qBAAUrC"}