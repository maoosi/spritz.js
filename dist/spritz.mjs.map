{"version":3,"file":"spritz.mjs","sources":["../node_modules/knot.js/dist/knot.module.js","../node_modules/wait.js/dist/wait.mjs","../src/spritz.js"],"sourcesContent":["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar knot = function knot() {\n  var extended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var events = Object.create(null);\n\n  function on(name, handler) {\n    events[name] = events[name] || [];\n    events[name].push(handler);\n    return this;\n  }\n\n  function once(name, handler) {\n    handler._once = true;\n    on(name, handler);\n    return this;\n  }\n\n  function off(name) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    handler ? events[name].splice(events[name].indexOf(handler), 1) : delete events[name];\n\n    return this;\n  }\n\n  function emit(name) {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // cache the events, to avoid consequences of mutation\n    var cache = events[name] && events[name].slice();\n\n    // only fire handlers if they exist\n    cache && cache.forEach(function (handler) {\n      // remove handlers added with 'once'\n      handler._once && off(name, handler);\n\n      // set 'this' context, pass args to handlers\n      handler.apply(_this, args);\n    });\n\n    return this;\n  }\n\n  return _extends({}, extended, {\n\n    on: on,\n    once: once,\n    off: off,\n    emit: emit\n  });\n};\n\nexport default knot;\n","/*!\n* wait.js 2.1.0 - JavaScript library to easily delay and chain class functions.\n*\n* @author       maoosi <hello@sylvainsimao.fr>\n* @homepage     https://github.com/maoosi/wait.js#readme\n* @copyright    Copyright (c) 2017 maoosi <hello@sylvainsimao.fr>\n* @license      MIT\n* @version      2.1.0\n*/\nvar classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Wait=function(){function t(){classCallCheck(this,t),this.waitQueue=[],this.waitExecution=!1}return createClass(t,[{key:\"handle\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.waitQueue.push({func:e,timeout:this._isAsyncFunc(e)?\"async\":n}),this.waitExecution||this._next(),t}},{key:\"pause\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return this.handle(t,n,e)}},{key:\"_isAsyncFunc\",value:function(t){return t.toString().search(\"done()\")>-1}},{key:\"_exec\",value:function(t){var e=this;t.call(this,function(){e._next()})}},{key:\"_next\",value:function(){var t=this;if(this.waitQueue.length>0){this.waitExecution=!0;var e=this.waitQueue.shift(),n=e.func,i=e.timeout;\"async\"===i?this._exec(n):i!==!1?(this._exec(n),setTimeout(function(){t._next()},i)):(this._exec(n),this._next())}else this.waitExecution=!1}}]),t}(),wait=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Wait,[null].concat(e)))};export default wait;\n//# sourceMappingURL=wait.mjs.map\n","import knot from 'knot.js'\nimport Wait from 'wait.js'\n\nclass Spritz {\n\n    /**\n        --- CORE ---\n    **/\n\n    constructor (selector, options = {}) {\n    // instance constructor\n        this.options = {\n            picture: options.picture || [],\n            steps: options.steps || 1,\n            rows: options.rows || 1,\n            init: (typeof options.init !== 'undefined') ? options.init : 1,\n            testunit: options.testunit || false\n        }\n\n        if (! Array.isArray(this.options.picture)) this.options.picture = [this.options.picture]\n\n        this.selector = typeof selector === 'string'\n            ? document.querySelector(selector)\n            : selector\n\n        this.emitter = knot()\n        this.waitter = Wait()\n        this.supportsWebP = this._supportsWebP()\n\n        this.initiated = false\n\n        return (this.options.init > 0)\n            ? this.init(this.options.init)\n            : this\n    }\n\n    _globalVars () {\n    // global vars\n        this.canvas = false\n        this.ctx = false\n        this.loaded = false\n        this._resetUntil()\n        this.anim = false\n        this.columns = Math.ceil(this.options.steps / this.options.rows)\n        this.currentFps = 15\n        this.flipped = false\n    }\n\n    _throttle (callback, delay) {\n    // throttle function\n        let last\n        let timer\n\n        return () => {\n            let context = this\n            let now = +new Date()\n            let args = arguments\n\n            if (last && now < last + delay) {\n                clearTimeout(timer)\n                timer = setTimeout(() => {\n                    last = now\n                    callback.apply(context, args)\n                }, delay)\n            } else {\n                last = now\n                callback.apply(context, args)\n            }\n        }\n    }\n\n    _bindEvents () {\n    // create events listeners\n        this.resize = this._throttle(() => {\n            this._resize()\n        }, 250)\n\n        window.addEventListener('resize', this.resize, false)\n    }\n\n    _unbindEvents () {\n    // remove events listeners\n        window.removeEventListener('resize', this.resize, false)\n    }\n\n    _resize () {\n    // viewport resize triggered\n        this._loadPicture()\n        this.emitter.emit('resize', this.pic)\n    }\n\n    /**\n        --- API ---\n    **/\n\n    init (step = 1) {\n    // init the sprite\n        return this.waitter.handle(this, () => {\n            if (!this.initiated) {\n                this.initialStep = step\n                this.currentStep = step\n\n                this._globalVars()\n                this._bindEvents()\n                this._createCanvas()\n                this._loadPicture()\n\n                this.initiated = true\n                this.emitter.emit('ready')\n            }\n        })\n    }\n\n    destroy () {\n    // destroy sprite instance\n        return this.waitter.handle(this, () => {\n            if (this.initiated) {\n                // stop stuff\n                this.stop()\n                this._unbindEvents()\n\n                // reset & remove canvas\n                this.canvas.parentNode.removeChild(this.canvas)\n                this.container.parentNode.removeChild(this.container)\n                this.canvas = false\n                this.ctx = false\n\n                // turn initiated to false\n                this.initiated = false\n\n                // emitt destroy\n                this.emitter.emit('destroy')\n\n                // turn off emitters\n                this.emitter.off('ready')\n                this.emitter.off('destroy')\n                this.emitter.off('resize')\n                this.emitter.off('play')\n                this.emitter.off('load')\n                this.emitter.off('change')\n                this.emitter.off('wait')\n                this.emitter.off('flip')\n                this.emitter.off('pause')\n                this.emitter.off('stop')\n            }\n        })\n    }\n\n    play (direction = false) {\n    // play animation forward\n        return this.waitter.handle(this, () => {\n            this.animDirection = (direction === 'backward') ? 'backward' : 'forward'\n            this._startAnimation()\n\n            this.emitter.emit('play', this.animDirection)\n        })\n    }\n\n    playback () {\n    // play animation backward\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'backward'\n            this._startAnimation()\n\n            this.emitter.emit('play', this.animDirection)\n        })\n    }\n\n    pause (silent = false) {\n    // pause animation\n        return this.waitter.handle(this, () => {\n            this._pauseAnimation()\n\n            if (!silent) {\n                this.emitter.emit('pause')\n            }\n        })\n    }\n\n    stop () {\n    // stop animation (= pause + reset)\n        return this.waitter.handle(this, () => {\n            this.pause(true)\n            this.step(this.initialStep)\n\n            this.emitter.emit('stop')\n        })\n    }\n\n    wait (milliseconds = 0) {\n    // chainable timeout\n        return this.waitter.handle(this, () => {\n            this.emitter.emit('wait', milliseconds)\n        }, milliseconds)\n    }\n\n    step (step = 1) {\n    // change the current frame/step\n        return this.waitter.handle(this, () => {\n            let fromStep = this.currentStep\n            this.currentStep = step\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    fps (speed) {\n    // change animation speed\n        return this.waitter.handle(this, () => {\n            this.currentFps = speed\n        })\n    }\n\n    until (step, loop = 1) {\n    // next animation will stop at this\n        return this.waitter.handle(this, () => {\n            this.stopAtStep = step\n            this.stopAtLoop = loop\n        })\n    }\n\n    next () {\n    // go to the next frame\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'forward'\n            let fromStep = this.currentStep\n            this.currentStep = this._targetStep()\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    prev () {\n    // go to the previous frame\n        return this.waitter.handle(this, () => {\n            this.animDirection = 'backward'\n            let fromStep = this.currentStep\n            this.currentStep = this._targetStep()\n            this._draw()\n\n            this.emitter.emit('change', fromStep, this.currentStep)\n        })\n    }\n\n    get (data, callback = false) {\n    // return data, then call the callback function with result\n        return this.waitter.handle(this, () => {\n            switch (data) {\n                case 'step':\n                    return callback !== false ? callback.call(this, this.currentStep) : this.currentStep\n                case 'picture':\n                    return callback !== false ? callback.call(this, this.pic) : this.pic\n                default:\n                    return false\n            }\n        })\n    }\n\n    flip () {\n    // flip the sprite horizontally\n        return this.waitter.handle(this, () => {\n            let css = this.flipped\n                ? 'width:100%;height:100%;'\n                : 'width:100%;height:100%;-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1);-webkit-filter:FlipH;filter:FlipH;'\n\n            this.container.setAttribute('style', css)\n            this.flipped = !this.flipped\n            this.emitter.emit('flip')\n        })\n    }\n\n    on (...args) { return this.emitter.on(...args) }\n    off (...args) { return this.emitter.off(...args) }\n\n    /**\n        --- ANIMATE ---\n    **/\n\n    _resetUntil () {\n    // reset the \"until()\" api command\n        this.stopAtLoop = false\n        this.stopAtStep = false\n    }\n\n    _targetStep () {\n    // return the following step to be displayed\n        if (this.animDirection === 'forward') {\n            return this.currentStep < this.options.steps\n                ? this.currentStep + 1\n                : 1\n        } else {\n            return this.currentStep > 1\n                ? this.currentStep - 1\n                : this.options.steps\n        }\n    }\n\n    _animate (timestamp) {\n    // frame animation\n        if (this.initiated) {\n            if (this.animTime === undefined) {\n                this.animTime = timestamp\n            }\n\n            let seg = Math.floor((timestamp - this.animTime) / (1000 / this.currentFps))\n            let pauseAnim = false\n\n            if (seg > this.animFrame) {\n                this.animFrame = seg\n                let fromStep = this.currentStep\n                this.currentStep = this._targetStep()\n\n                let continueAnimate = true\n                if (this.currentStep === this.stopAtStep) {\n                    this.currentLoop ++\n                    if (this.currentLoop === this.stopAtLoop) {\n                        continueAnimate = false\n                    }\n                }\n\n                if (continueAnimate) {\n                    this._draw()\n                    this.emitter.emit('change', fromStep, this.currentStep)\n                } else {\n                    this._draw()\n                    this.pause()\n                    pauseAnim = true\n                }\n            }\n\n            if (!pauseAnim && !this.requireStop) {\n                this.anim = window.requestAnimationFrame((timestamp) => this._animate(timestamp))\n            }\n        }\n    }\n\n    _startAnimation () {\n    // start animation\n        if (!this.anim) {\n            this.requireStop = false\n            this.animTime = undefined\n            this.animFrame = 0\n            this.currentLoop = 0\n            this.anim = window.requestAnimationFrame((timestamp) => this._animate(timestamp))\n        } else {\n            this.pause()\n            this.play(this.animDirection)\n        }\n    }\n\n    _pauseAnimation () {\n    // pause animation\n        if (this.anim) {\n            this._resetUntil()\n            this.requireStop = true\n            window.cancelAnimationFrame(this.anim)\n            this.anim = false\n        }\n    }\n\n    /**\n        --- DETECT & CALCULATE ---\n    **/\n\n    _selectPicture () {\n    // select picture src from list\n        for (let i = 0; i < this.options.picture.length; i++) {\n            let pic = this.options.picture[i]\n            if (this._supportsFormat(pic.srcset) && this._matchesMedia(pic.media)) {\n                this.pic = pic\n                return pic.srcset\n            }\n        }\n        return false\n    }\n\n    _supportsFormat (filename) {\n    // return true if filename is a supported format\n        let ext = this._getExtension(filename)\n        return (ext === 'webp' && this.supportsWebP) || ext !== 'webp'\n    }\n\n    _supportsWebP () {\n    // return true if webP is supported\n        let canvas = document.createElement('canvas')\n        canvas.width = canvas.height = 1\n        return canvas.toDataURL && canvas.toDataURL('image/webp') && canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0\n    }\n\n    _getExtension (filename) {\n    // return the filename extension\n        return (/[.]/.exec(filename)) ? /[^.]+$/.exec(filename)[0] : undefined\n    }\n\n    _matchesMedia (query = undefined) {\n    // return true if matches the media query\n        let mq = window.matchMedia(query)\n        return query !== undefined ? mq.matches : true\n    }\n\n    _setDimensions () {\n    // calculate sprite dimensions\n        this.stepWidth = this.pic.width / this.columns\n        this.stepHeight = this.pic.height / this.options.rows\n        this.stepRatio = this.stepWidth / this.stepHeight\n\n        this.parentWidth = this.selector.clientWidth\n        this.parentHeight = this.selector.clientHeight\n        this.parentRatio = this.parentWidth / this.parentHeight\n\n        if (this.pic.objectFit === 'cover') {\n            if (this.stepRatio >= this.parentRatio) {\n                this.canvasHeight = this.parentHeight\n                this.canvasWidth = (this.stepWidth * this.canvasHeight) / this.stepHeight\n            } else {\n                this.canvasWidth = this.parentWidth\n                this.canvasHeight = (this.stepHeight * this.canvasWidth) / this.stepWidth\n            }\n        } else {\n            if (this.stepRatio >= this.parentRatio) {\n                this.canvasWidth = this.parentWidth\n                this.canvasHeight = (this.stepHeight * this.canvasWidth) / this.stepWidth\n            } else {\n                this.canvasHeight = this.parentHeight\n                this.canvasWidth = (this.stepWidth * this.canvasHeight) / this.stepHeight\n            }\n        }\n\n        this.canvas.width = this.canvasWidth\n        this.canvas.height = this.canvasHeight\n    }\n\n    /**\n        --- CREATE & DRAW ---\n    **/\n\n    _loadPicture () {\n    // load source picture\n        this.picture = new Image()\n        this.picture.onload = () => {\n            if (!this.pic.width) this.pic.width = this.picture.naturalWidth\n            if (!this.pic.height) this.pic.height = this.picture.naturalHeight\n\n            if (!this.loaded) {\n                this.emitter.emit('load', this.pic)\n                this.loaded = true\n            }\n            this._draw()\n        }\n        this.picture.src = this._selectPicture()\n    }\n\n    _draw () {\n    // draw sprite\n        if (this.initiated) {\n            this._setDimensions()\n            this._drawPicture()\n        }\n    }\n\n    _drawPicture () {\n    // draw picture into canvas\n        let targetColumn = Math.floor((this.currentStep - 1) % this.columns)\n        let targetRow = Math.floor((this.currentStep - 1) / this.columns)\n\n        let posX = targetColumn * this.stepWidth\n        let posY = targetRow * this.stepHeight\n\n        if (!this.options.testunit) {\n            this.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\n\n            this.ctx.drawImage(\n                this.picture,\n                Math.round(posX), Math.round(posY),\n                this.stepWidth,\n                this.stepHeight,\n                0, 0,\n                this.canvasWidth,\n                this.canvasHeight\n            )\n        }\n    }\n\n    _createCanvas () {\n    // create html5 canvas\n        this.canvas = document.createElement('canvas')\n        this.canvas.setAttribute('style', 'position:absolute;left:50%;top:50%;-webkit-transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);-ms-transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);transform:translateY(-50%) translateY(1px) translateX(-50%) translateX(1px);')\n\n        this.container = document.createElement('div')\n        this.container.setAttribute('style', 'width:100%;height:100%;position:relative;')\n        this.container.appendChild(this.canvas)\n\n        this.selector.appendChild(this.container)\n        this.ctx = this.canvas.getContext('2d')\n    }\n\n}\n\nexport default (...args) => { return new Spritz(...args) }\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","knot","extended","undefined","events","create","on","name","handler","push","this","once","_once","off","splice","indexOf","emit","_this","_len","args","Array","_key","cache","slice","forEach","apply","Wait","waitQueue","waitExecution","createClass","t","value","context","func","milliseconds","_isAsyncFunc","_next","handle","toString","search","e","c","shift","f","_exec","wait","Spritz","selector","options","picture","steps","rows","init","testunit","isArray","document","querySelector","emitter","waitter","supportsWebP","_supportsWebP","initiated","canvas","ctx","loaded","_resetUntil","anim","columns","Math","ceil","currentFps","flipped","callback","delay","last","timer","now","Date","clearTimeout","setTimeout","resize","_throttle","_this2","_resize","window","addEventListener","removeEventListener","_loadPicture","pic","step","_this3","initialStep","currentStep","_globalVars","_bindEvents","_createCanvas","_this4","stop","_unbindEvents","parentNode","removeChild","container","direction","_this5","animDirection","_startAnimation","_this6","silent","_this7","_pauseAnimation","_this8","pause","_this9","fromStep","_this10","_draw","speed","_this11","loop","_this12","stopAtStep","stopAtLoop","_this13","_targetStep","_this14","data","_this15","css","_this16","setAttribute","timestamp","animTime","seg","floor","pauseAnim","animFrame","continueAnimate","currentLoop","requireStop","requestAnimationFrame","_this17","_animate","play","_this18","cancelAnimationFrame","_supportsFormat","srcset","_matchesMedia","media","filename","ext","_getExtension","createElement","width","height","toDataURL","exec","query","mq","matchMedia","matches","stepWidth","stepHeight","stepRatio","parentWidth","clientWidth","parentHeight","clientHeight","parentRatio","objectFit","canvasHeight","canvasWidth","Image","onload","_this19","naturalWidth","naturalHeight","src","_selectPicture","_setDimensions","_drawPicture","targetColumn","targetRow","posX","posY","clearRect","drawImage","round","appendChild","getContext"],"mappings":";;;;;;;;;krBAAA,IAAIA,EAAWC,OAAOC,QAAU,SAAUC,OACnC,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,KACrCG,EAASF,UAAUD,OAElB,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,WAKpBL,GAGLS,EAAO,eACLC,EAAWR,UAAUC,OAAS,QAAsBQ,IAAjBT,UAAU,GAAmBA,UAAU,GAAK,GAE/EU,EAASd,OAAOe,OAAO,eAElBC,EAAGC,EAAMC,UAChBJ,EAAOG,GAAQH,EAAOG,IAAS,GAC/BH,EAAOG,GAAME,KAAKD,GACXE,cAGAC,EAAKJ,EAAMC,UAClBA,EAAQI,OAAQ,EAChBN,EAAGC,EAAMC,GACFE,cAGAG,EAAIN,OACPC,EAAUd,UAAUC,OAAS,QAAsBQ,IAAjBT,UAAU,IAAmBA,UAAU,UAE7Ec,EAAUJ,EAAOG,GAAMO,OAAOV,EAAOG,GAAMQ,QAAQP,GAAU,UAAYJ,EAAOG,GAEzEG,cAGAM,EAAKT,WACRU,EAAQP,KAEHQ,EAAOxB,UAAUC,OAAQwB,EAAOC,MAAMF,EAAO,EAAIA,EAAO,EAAI,GAAIG,EAAO,EAAGA,EAAOH,EAAMG,IAC9FF,EAAKE,EAAO,GAAK3B,UAAU2B,OAIzBC,EAAQlB,EAAOG,IAASH,EAAOG,GAAMgB,eAGzCD,GAASA,EAAME,SAAQ,SAAUhB,GAE/BA,EAAQI,OAASC,EAAIN,EAAMC,GAG3BA,EAAQiB,MAAMR,EAAOE,MAGhBT,YAGFrB,EAAS,GAAIa,EAAU,CAE5BI,GAAIA,EACJK,KAAMA,EACNE,IAAKA,EACLG,KAAMA,yVClEJU,EAAAA,oBAAAA,IAAAA,EAAAA,KAAAA,GAAAA,KAIOC,UAAAA,GAAAA,KACAC,eAAAA,SAAgBC,EAAAC,EAAA,CAAA,CAAAjC,IAAA,SAAAkC,MAAA,SAGjBC,EAASC,OAAMC,EAAAA,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,IAAAA,UAAAA,UAAAA,KAEdP,UAAUlB,KAAAA,CAAAA,KACHwB,EAAAA,QACGvB,KAAKyB,aAAaF,GAAQ,QAAUC,IAG9CxB,KAAKkB,eAAelB,KAAK0B,QAEvBJ,IAAAA,CAAAA,IAAAA,QAAAA,MAAAA,SAGJA,EAASE,OAAcD,EAAAA,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,GAAO,oBAE1BvB,KAAK2B,OAAOL,EAASC,EAAMC,KAAAA,CAAAA,IAAAA,eAAAA,MAAAA,SAGxBD,UAEHA,EAAKK,WAAWC,OAAO,WAAY,IAAA,CAAA1C,IAAA,QAAAkC,MAAA,SAGvCE,OAAAA,EAAAA,KAAAA,EAEEjC,KAAKU,MAAO,WAAA8B,EAAaJ,aAAAA,CAAAA,IAAAA,QAAAA,MAAAA,eAAAA,EAAAA,QAK1B1B,KAAKiB,UAAUhC,OAAS,EAAG,MACtBiC,eAAAA,MAEDa,EAAI/B,KAAKiB,UAAUe,QACnBC,EAAIF,EAAAA,KACJX,EAAIW,EAAAA,kBAEJX,EAAAA,KACKc,MAAMD,IACJb,IAAAA,GAAMpB,KACRkC,MAAMD,GAAAA,YACA,WAAAb,EAAaM,UAAWN,KAAAA,KAE9Bc,MAAMD,GAAAA,KACNP,cAAAA,KAGJR,eAAAA,MAAgBE,EAtD3BJ,GAsD2BmB,EAMlB,eAAA,IAAAf,EAAApC,UAAAC,OAAIwB,EAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,UAAAA,IAAAA,SAAAA,UAAAA,KAAAA,MAAsBO,EAAAA,CAAAA,MAAAA,OAAQP,MCzD3C2B,wBAMWC,OAAUC,yDAAU,oHAExBA,QAAU,CACXC,QAASD,EAAQC,SAAW,GAC5BC,MAAOF,EAAQE,OAAS,EACxBC,KAAMH,EAAQG,MAAQ,EACtBC,UAA+B,IAAjBJ,EAAQI,KAAwBJ,EAAQI,KAAO,EAC7DC,SAAUL,EAAQK,WAAY,GAG5BjC,MAAMkC,QAAQ5C,KAAKsC,QAAQC,WAAUvC,KAAKsC,QAAQC,QAAU,CAACvC,KAAKsC,QAAQC,eAE3EF,SAA+B,iBAAbA,EACjBQ,SAASC,cAAcT,GACvBA,OAEDU,QAAUxD,SACVyD,QAAUhC,SACViC,aAAejD,KAAKkD,qBAEpBC,WAAY,EAETnD,KAAKsC,QAAQI,KAAO,EACtB1C,KAAK0C,KAAK1C,KAAKsC,QAAQI,MACvB1C,uEAKDoD,QAAS,OACTC,KAAM,OACNC,QAAS,OACTC,mBACAC,MAAO,OACPC,QAAUC,KAAKC,KAAK3D,KAAKsC,QAAQE,MAAQxC,KAAKsC,QAAQG,WACtDmB,WAAa,QACbC,SAAU,oCAGRC,EAAUC,OAEbC,EACAC,4BAEG,eACC3C,EAAUf,EACV2D,GAAO,IAAIC,KACX1D,EAAOzB,EAEPgF,GAAQE,EAAMF,EAAOD,GACrBK,aAAaH,GACbA,EAAQI,YAAW,WACfL,EAAOE,EACPJ,EAAS/C,MAAMO,EAASb,KACzBsD,KAEHC,EAAOE,EACPJ,EAAS/C,MAAMO,EAASb,2DAO3B6D,OAAStE,KAAKuE,WAAU,WACzBC,EAAKC,YACN,KAEHC,OAAOC,iBAAiB,SAAU3E,KAAKsE,QAAQ,2CAK/CI,OAAOE,oBAAoB,SAAU5E,KAAKsE,QAAQ,0CAK7CO,oBACA9B,QAAQzC,KAAK,SAAUN,KAAK8E,+CAO/BC,yDAAO,SAEF/E,KAAKgD,QAAQrB,OAAO3B,MAAM,WACxBgF,EAAK7B,YACN6B,EAAKC,YAAcF,EACnBC,EAAKE,YAAcH,EAEnBC,EAAKG,cACLH,EAAKI,cACLJ,EAAKK,gBACLL,EAAKH,eAELG,EAAK7B,WAAY,EACjB6B,EAAKjC,QAAQzC,KAAK,iEAOnBN,KAAKgD,QAAQrB,OAAO3B,MAAM,WACzBsF,EAAKnC,YAELmC,EAAKC,OACLD,EAAKE,gBAGLF,EAAKlC,OAAOqC,WAAWC,YAAYJ,EAAKlC,QACxCkC,EAAKK,UAAUF,WAAWC,YAAYJ,EAAKK,WAC3CL,EAAKlC,QAAS,EACdkC,EAAKjC,KAAM,EAGXiC,EAAKnC,WAAY,EAGjBmC,EAAKvC,QAAQzC,KAAK,WAGlBgF,EAAKvC,QAAQ5C,IAAI,SACjBmF,EAAKvC,QAAQ5C,IAAI,WACjBmF,EAAKvC,QAAQ5C,IAAI,UACjBmF,EAAKvC,QAAQ5C,IAAI,QACjBmF,EAAKvC,QAAQ5C,IAAI,QACjBmF,EAAKvC,QAAQ5C,IAAI,UACjBmF,EAAKvC,QAAQ5C,IAAI,QACjBmF,EAAKvC,QAAQ5C,IAAI,QACjBmF,EAAKvC,QAAQ5C,IAAI,SACjBmF,EAAKvC,QAAQ5C,IAAI,sDAKvByF,iEAEK5F,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7B6F,EAAKC,cAA+B,aAAdF,EAA4B,WAAa,UAC/DC,EAAKE,kBAELF,EAAK9C,QAAQzC,KAAK,OAAQuF,EAAKC,uEAM5B9F,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7BgG,EAAKF,cAAgB,WACrBE,EAAKD,kBAELC,EAAKjD,QAAQzC,KAAK,OAAQ0F,EAAKF,6DAIhCG,iEAEIjG,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7BkG,EAAKC,kBAEAF,GACDC,EAAKnD,QAAQzC,KAAK,6DAOnBN,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7BoG,EAAKC,OAAM,GACXD,EAAKrB,KAAKqB,EAAKnB,aAEfmB,EAAKrD,QAAQzC,KAAK,qDAIpBkB,yDAAe,SAEVxB,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7BsG,EAAKvD,QAAQzC,KAAK,OAAQkB,KAC3BA,6CAGDuD,yDAAO,SAEF/E,KAAKgD,QAAQrB,OAAO3B,MAAM,eACzBuG,EAAWC,EAAKtB,YACpBsB,EAAKtB,YAAcH,EACnByB,EAAKC,QAELD,EAAKzD,QAAQzC,KAAK,SAAUiG,EAAUC,EAAKtB,4CAI9CwB,qBAEM1G,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7B2G,EAAK/C,WAAa8C,mCAInB3B,cAAM6B,yDAAO,SAET5G,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7B6G,EAAKC,WAAa/B,EAClB8B,EAAKE,WAAaH,sDAMf5G,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7BgH,EAAKlB,cAAgB,cACjBS,EAAWS,EAAK9B,YACpB8B,EAAK9B,YAAc8B,EAAKC,cACxBD,EAAKP,QAELO,EAAKjE,QAAQzC,KAAK,SAAUiG,EAAUS,EAAK9B,iEAMxClF,KAAKgD,QAAQrB,OAAO3B,MAAM,WAC7BkH,EAAKpB,cAAgB,eACjBS,EAAWW,EAAKhC,YACpBgC,EAAKhC,YAAcgC,EAAKD,cACxBC,EAAKT,QAELS,EAAKnE,QAAQzC,KAAK,SAAUiG,EAAUW,EAAKhC,4CAI9CiC,cAAMrD,iEAEA9D,KAAKgD,QAAQrB,OAAO3B,MAAM,kBACrBmH,OACC,cACmB,IAAbrD,EAAqBA,EAASxE,KAAK8H,EAAMA,EAAKlC,aAAekC,EAAKlC,gBACxE,iBACmB,IAAbpB,EAAqBA,EAASxE,KAAK8H,EAAMA,EAAKtC,KAAOsC,EAAKtC,mBAE1D,uDAOZ9E,KAAKgD,QAAQrB,OAAO3B,MAAM,eACzBqH,EAAMC,EAAKzD,QACT,0BACA,6IAENyD,EAAK3B,UAAU4B,aAAa,QAASF,GACrCC,EAAKzD,SAAWyD,EAAKzD,QACrByD,EAAKvE,QAAQzC,KAAK,4DAICyC,SAAQnD,wEACPmD,SAAQ5C,kEAQ3B4G,YAAa,OACbD,YAAa,8CAKS,YAAvB9G,KAAK8F,cACE9F,KAAKkF,YAAclF,KAAKsC,QAAQE,MACjCxC,KAAKkF,YAAc,EACnB,EAEClF,KAAKkF,YAAc,EACpBlF,KAAKkF,YAAc,EACnBlF,KAAKsC,QAAQE,uCAIjBgF,iBAEFxH,KAAKmD,UAAW,MACM1D,IAAlBO,KAAKyH,gBACAA,SAAWD,OAGhBE,EAAMhE,KAAKiE,OAAOH,EAAYxH,KAAKyH,WAAa,IAAOzH,KAAK4D,aAC5DgE,GAAY,KAEZF,EAAM1H,KAAK6H,UAAW,MACjBA,UAAYH,MACbnB,EAAWvG,KAAKkF,iBACfA,YAAclF,KAAKiH,kBAEpBa,GAAkB,EAClB9H,KAAKkF,cAAgBlF,KAAK8G,kBACrBiB,cACD/H,KAAK+H,cAAgB/H,KAAK+G,aAC1Be,GAAkB,IAItBA,QACKrB,aACA1D,QAAQzC,KAAK,SAAUiG,EAAUvG,KAAKkF,oBAEtCuB,aACAJ,QACLuB,GAAY,GAIfA,GAAc5H,KAAKgI,mBACfxE,KAAOkB,OAAOuD,uBAAsB,SAACT,UAAcU,EAAKC,SAASX,6DAOzExH,KAAKwD,WAOD6C,aACA+B,KAAKpI,KAAK8F,sBAPVkC,aAAc,OACdP,cAAWhI,OACXoI,UAAY,OACZE,YAAc,OACdvE,KAAOkB,OAAOuD,uBAAsB,SAACT,UAAca,EAAKF,SAASX,iDAStExH,KAAKwD,YACAD,mBACAyE,aAAc,EACnBtD,OAAO4D,qBAAqBtI,KAAKwD,WAC5BA,MAAO,gDAUX,IAAIzE,EAAI,EAAGA,EAAIiB,KAAKsC,QAAQC,QAAQtD,OAAQF,IAAK,KAC9C+F,EAAM9E,KAAKsC,QAAQC,QAAQxD,MAC3BiB,KAAKuI,gBAAgBzD,EAAI0D,SAAWxI,KAAKyI,cAAc3D,EAAI4D,mBACtD5D,IAAMA,EACJA,EAAI0D,cAGZ,0CAGMG,OAETC,EAAM5I,KAAK6I,cAAcF,SACb,SAARC,GAAkB5I,KAAKiD,cAAyB,SAAR2F,8CAK5CxF,EAASP,SAASiG,cAAc,iBACpC1F,EAAO2F,MAAQ3F,EAAO4F,OAAS,EACxB5F,EAAO6F,WAAa7F,EAAO6F,UAAU,eAA+E,IAA9D7F,EAAO6F,UAAU,cAAc5I,QAAQ,yDAGzFsI,SAEH,MAAMO,KAAKP,GAAa,SAASO,KAAKP,GAAU,QAAKlJ,8CAGlD0J,8DAAQ1J,EAEf2J,EAAK1E,OAAO2E,WAAWF,eACV1J,IAAV0J,GAAsBC,EAAGE,sDAK3BC,UAAYvJ,KAAK8E,IAAIiE,MAAQ/I,KAAKyD,aAClC+F,WAAaxJ,KAAK8E,IAAIkE,OAAShJ,KAAKsC,QAAQG,UAC5CgH,UAAYzJ,KAAKuJ,UAAYvJ,KAAKwJ,gBAElCE,YAAc1J,KAAKqC,SAASsH,iBAC5BC,aAAe5J,KAAKqC,SAASwH,kBAC7BC,YAAc9J,KAAK0J,YAAc1J,KAAK4J,aAEhB,UAAvB5J,KAAK8E,IAAIiF,UACL/J,KAAKyJ,WAAazJ,KAAK8J,kBAClBE,aAAehK,KAAK4J,kBACpBK,YAAejK,KAAKuJ,UAAYvJ,KAAKgK,aAAgBhK,KAAKwJ,kBAE1DS,YAAcjK,KAAK0J,iBACnBM,aAAgBhK,KAAKwJ,WAAaxJ,KAAKiK,YAAejK,KAAKuJ,WAGhEvJ,KAAKyJ,WAAazJ,KAAK8J,kBAClBG,YAAcjK,KAAK0J,iBACnBM,aAAgBhK,KAAKwJ,WAAaxJ,KAAKiK,YAAejK,KAAKuJ,iBAE3DS,aAAehK,KAAK4J,kBACpBK,YAAejK,KAAKuJ,UAAYvJ,KAAKgK,aAAgBhK,KAAKwJ,iBAIlEpG,OAAO2F,MAAQ/I,KAAKiK,iBACpB7G,OAAO4F,OAAShJ,KAAKgK,oEASrBzH,QAAU,IAAI2H,WACd3H,QAAQ4H,OAAS,WACbC,EAAKtF,IAAIiE,QAAOqB,EAAKtF,IAAIiE,MAAQqB,EAAK7H,QAAQ8H,cAC9CD,EAAKtF,IAAIkE,SAAQoB,EAAKtF,IAAIkE,OAASoB,EAAK7H,QAAQ+H,eAEhDF,EAAK9G,SACN8G,EAAKrH,QAAQzC,KAAK,OAAQ8J,EAAKtF,KAC/BsF,EAAK9G,QAAS,GAElB8G,EAAK3D,cAEJlE,QAAQgI,IAAMvK,KAAKwK,iDAKpBxK,KAAKmD,iBACAsH,sBACAC,2DAMLC,EAAejH,KAAKiE,OAAO3H,KAAKkF,YAAc,GAAKlF,KAAKyD,SACxDmH,EAAYlH,KAAKiE,OAAO3H,KAAKkF,YAAc,GAAKlF,KAAKyD,SAErDoH,EAAOF,EAAe3K,KAAKuJ,UAC3BuB,EAAOF,EAAY5K,KAAKwJ,WAEvBxJ,KAAKsC,QAAQK,gBACTU,IAAI0H,UAAU,EAAG,EAAG/K,KAAKiK,YAAajK,KAAKgK,mBAE3C3G,IAAI2H,UACLhL,KAAKuC,QACLmB,KAAKuH,MAAMJ,GAAOnH,KAAKuH,MAAMH,GAC7B9K,KAAKuJ,UACLvJ,KAAKwJ,WACL,EAAG,EACHxJ,KAAKiK,YACLjK,KAAKgK,4DAOR5G,OAASP,SAASiG,cAAc,eAChC1F,OAAOmE,aAAa,QAAS,4RAE7B5B,UAAY9C,SAASiG,cAAc,YACnCnD,UAAU4B,aAAa,QAAS,kDAChC5B,UAAUuF,YAAYlL,KAAKoD,aAE3Bf,SAAS6I,YAAYlL,KAAK2F,gBAC1BtC,IAAMrD,KAAKoD,OAAO+H,WAAW,gGAKvB1K,2BAAAA,2BAAsB2B,EAAU3B"}